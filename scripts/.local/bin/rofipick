#!/bin/bash

# Default values
prompt="Select an option"
options=()

# Parse arguments
while [[ $# -gt 0 ]]; do
    case $1 in
        -p|--prompt|-prompt)
            prompt="$2"
            shift 2
            ;;
        -o|--option|-option|--opt|-opt)
            options+=("$2")
            shift 2
            ;;
        *)
            echo "Unknown argument: $1"
            exit 1
            ;;
    esac
done



ROFI_THEME="$myscripts/rofi-dmenu/dmenu.rasi"

# Build rofi command with optional colors
rofi_cmd="rofi -dmenu -i -p \"$prompt\" -theme \"$ROFI_THEME\" "

# Extract just labels for rofi menu
labels=$(printf "%s\n" "${options[@]}" | cut -d';' -f1)

# Show menu and capture selection
selection=$(echo "$labels" | eval $rofi_cmd)

# Match selection to its command
for opt in "${options[@]}"; do
    label=$(echo "$opt" | cut -d';' -f1)
    cmd=$(echo "$opt" | cut -d';' -f2-)
    if [[ "$selection" == "$label" ]]; then
        eval "$cmd"
        exit 0
    fi
done

exit 0
